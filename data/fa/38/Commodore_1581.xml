<article title='Commodore_1581'><paragraph><template><target>refimprove</target><arg name="date">February 2013</arg></template><link><target>Image:Commodore 1581 01.jpg</target><part>thumb</part><part>right</part><part>Commodore 1581</part></link>The<space/><bold>Commodore 1581</bold><space/>is a 3-inch<space/><link><target>Double-sided disk</target><part>double-sided</part></link><space/><link><target>double density</target><part>double-density</part></link><space/><link><target>floppy disk</target></link><space/>drive that was first made by<space/><link><target>Commodore International</target><part>Commodore Business Machines (CBM)</part></link><space/>in 1987, primarily for its<space/><link><target>Commodore 64</target><part>C64</part></link><space/>and<space/><link><target>Commodore 128</target><part>C128</part></link><space/><link><target>home computer</target><part>home</part></link>/<link><target>personal computer</target><trail>s</trail></link>. The drive stores 800<space/><link><target>kilobyte</target><trail>s</trail></link><space/>using an<space/><link><target>Modified Frequency Modulation</target><part>MFM</part></link><space/>encoding<extension extension_name='ref' name="dd81"><link type='external' href='http://personalpages.tds.net/~rcarlsen/cbm/1581.txt'>tds.net - 1581 DISK DRIVE DIAGNOSTICS, latest updates and corrections 7-13-05</link></extension><space/>but format different from<space/><link><target>MS-DOS</target></link><space/>(720 kB),<space/><link><target>Amiga</target></link><space/>(880 kB), and<space/><link><target>Macintosh Plus</target><part>Mac Plus</part></link><space/>(800 kB) formats. With special software it's possible to read C1581 disks on an x86 PC system, and likewise, read MS-DOS and other formats of disks in the C1581 (using Big Blue Reader), provided that the PC or other floppy handles the<space/><template><target>nowrap</target><arg>"720 kB"</arg></template><space/>size format.<extension extension_name='ref' name="dd81"></extension><space/>This capability was most frequently used to read MS-DOS disks. The drive was released in the summer of 1987 and quickly became popular with<space/><link><target>bulletin board system</target><part>bulletin board system (BBS)</part></link><space/>operators and other users.</paragraph><paragraph>Like the<space/><link><target>Commodore 1541</target><part>1541</part></link><space/>and<space/><link><target>Commodore 1571</target><part>1571</part></link>, the 1581 has an onboard<space/><link><target>MOS Technology 6502</target></link><space/>CPU with its own ROM and RAM, and uses a serial version of the<space/><link><target>IEEE-488</target></link><space/>interface. Inexplicably, the drive's ROM contains commands for parallel use, although no parallel interface was available. Unlike the 1571, which is nearly 100% backward-compatible with the 1541, the 1581 has limited compatibility with Commodore's earlier drives. Although it responds to the same DOS commands, most disk utilities written prior to 1987most notably fast loadersare so 1541-specific that they do not work with the 1581.</paragraph><paragraph>The version of<space/><link><target>Commodore DOS</target></link><space/>built into the 1581 added support for<space/><link><target>Disk partitioning</target><part>partitions</part></link>, which could also function as fixed-allocation<space/><link><target>Directory (file systems)</target><part>subdirectories</part></link>. PC-style subdirectories were rejected as being too difficult to work with in terms of block availability maps, then still much in vogue, and which for some time had been the traditional way of inquiring into block availability. When used together with the C128, it implements faster<space/><link><target>burst mode (computing)</target><part>burst mode</part></link><space/>access than the<space/><link><target>Commodore 1571</target></link><space/>5&quot; drive. When using the 1581 together with the C64, however, it is almost as slow as the 1541 drive, due to limitations of the C64's ROM code. The 1581 provides a total of 3160 blocks free when formatted (a block being equal to 256<space/><link><target>byte</target><trail>s</trail></link>). The number of permitted directory entries was also increased, to 296 entries. With a storage capacity of 800 kB, the 1581 is the highest-capacity serial-bus drive that was ever made by Commodore (the 1-MB SFD-1001 uses the parallel IEEE-488), and the only 3&quot; one. However, starting in 1991,<space/><link><target>Creative Micro Designs</target><part>Creative Micro Designs (CMD)</part></link><space/>made the<space/><link><target>CMD FD-2000</target><part>FD-2000</part></link><space/><link><target>high density</target></link><space/>(1.6&amp;nbsp;MB) and<space/><link><target>CMD FD-4000</target><part>FD-4000</part></link><space/><link><target>extended density</target></link><space/>(3.2&amp;nbsp;MB) 3&quot; drives, both of which offered not only a 1581-emulation mode but also 1541- and 1571-compatibility modes.</paragraph><paragraph>Like the<space/><link><target>Commodore 1541</target><part>1541</part></link><space/>and<space/><link><target>Commodore 1571</target><part>1571</part></link>, a nearly identical<space/><link><target>job queue</target></link><space/>is available to the user in<space/><link><target>zero page</target></link><space/>(except for job 0), providing for exceptional degrees of compatibility.</paragraph><paragraph>Unlike the cases of the 1541 and 1571, the low-level disk format used by the 1581 is similar enough to the MS-DOS format as the 1581 is built around a<space/><link><target>Western Digital FD1771</target><part>WD1770</part></link><space/>FM/MFM floppy controller chip. PC floppy controllers directly connected via the ISA-bus or onboard, but not standalone USB floppy drives, are able to deal with the 1581 format without need for any special tricks. Thus, utilities to format, read, and write 1581-format disks in standard PC floppy drives under<space/><link><target>Linux</target></link><space/>and<space/><link><target>Microsoft Windows</target></link><space/>exist. This controller chip, however, was the seat of some early problems with 1581 drives when the first production runs were recalled due to a high failure rate; the problem was quickly corrected. Later versions of the 1581 drive have a smaller, more streamlined-looking external power supply provided with them.</paragraph><heading level='2'>Specifications</heading><table class="wikitable"><tablerow><tablehead>Quantity</tablehead><tablehead>Value</tablehead></tablerow><tablerow><tablecell>Onboard CPU</tablecell><tablecell><link><target>MOS Technology 6502</target></link><space/>@ 2<space/><link><target>Hertz</target><part>MHz</part></link></tablecell></tablerow><tablerow><tablecell>RAM</tablecell><tablecell>8<space/><link><target>kilobyte</target><part>kB</part></link></tablecell></tablerow><tablerow><tablecell>ROM</tablecell><tablecell>32 kB</tablecell></tablerow><tablerow><tablecell>Transfer protocols</tablecell><tablecell>Standard and fast serial;<space/><link><target>Burst mode (computing)</target><part>burst mode</part></link>; and commands for parallel interface (the latter not used)</tablecell></tablerow><tablerow><tablecell>Disk type</tablecell><tablecell>3,5&quot; inch</tablecell></tablerow><tablerow><tablecell>Storage format</tablecell><tablecell><link><target>Modified Frequency Modulation</target><part>MFM</part></link>,<space/><link><target>double density</target></link>,<space/><link><target>Double-sided disk</target><part>double-sided</part></link></tablecell></tablerow><tablerow><tablecell>Interface</tablecell><tablecell>CBM's proprietary serial IEEE-488</tablecell></tablerow><tablerow><tablecell>Power</tablecell><tablecell><template><target>nowrap</target><arg>5 V @ 1 A</arg></template><space/><template><target>nowrap</target><arg>(5 [[Volt-ampere|VA]])</arg></template><xhtml:br></xhtml:br><space/><template><target>nowrap</target><arg>12 V @ 0.5 A</arg></template><space/><template><target>nowrap</target><arg>(6 VA)</arg></template></tablecell></tablerow></table><paragraph><template><target>FOLDOC</target></template></paragraph><heading level='3'>1581 Image Layout</heading><paragraph>The 1581 disk has 80 logical tracks, each with 40 logical sectors (the actual physical layout of the diskette is abstracted and managed by a hardware translation layer). The directory starts on 40/3 (track 40, sector 3). The disk header is on 40/0, and the BAM (block availability map) resides on 40/1 and 40/2.</paragraph><paragraph>Header Contents</paragraph><preblock><preline>$0001 T/S reference to first directory sector (40/3)</preline><preline><space/><space/><space/><space/>02 DOS version ('D')</preline><preline><space/>04-13 Disk Label, $A0 padded</preline><preline><space/>16-17 Disk ID</preline><preline><space/>19-1A DOS type ('3D')</preline></preblock><paragraph>BAM Contents, 40/1</paragraph><preblock><preline>$0001 T/S to next BAM sector (40/2)</preline><preline><space/><space/><space/><space/>02 DOS version ('D')</preline><preline><space/>04-05 Disk ID</preline><preline><space/><space/><space/><space/>06 I/O byte</preline><preline><space/><space/><space/><space/>07 Autoboot flag</preline><preline><space/>10-FF BAM entries for Tracks 1-40</preline></preblock><paragraph>BAM Contents, 40/2</paragraph><preblock><preline>$0001 00/FF</preline><preline><space/><space/><space/><space/>02 DOS version ('D')</preline><preline><space/>04-05 Disk ID</preline><preline><space/><space/><space/><space/>06 I/O byte</preline><preline><space/><space/><space/><space/>07 Autoboot flag</preline><preline><space/>10-FF BAM entries for Tracks 41-80</preline></preblock><heading level='2'>See also</heading><list type='bullet'><listitem><link><target>Commodore 128</target></link></listitem></list><heading level='2'>References</heading><paragraph><extension extension_name='references'></extension></paragraph><heading level='2'>External links</heading><list type='bullet'><listitem><link type='external' href='http://www.d81.de/'>d81.de: Permanent home of 1581-Copy</link>, A MS-Windows based Tool uses any standard x86-PC 3.5&quot; drive to WRITE &amp; READ 1581 disk images (d81).</listitem><listitem><link type='external' href='http://members.optusnet.com.au/spacetaxi64/MAIN/1581-GAMES.htm'>optusnet.com.au: 1581 Games, Commodore 1581 Games, D81 , CMD FD2000 &amp; FD4000 Games</link>, Tools &amp; Games specifically for the 1581 disk drive.</listitem><listitem><link type='external' href='http://members.optusnet.com.au/spacetaxi64/MAIN/1581-PC-35-DRIVE.htm'>optusnet.com.au: SEGA SF-7000 with PC 3.5&quot; Floppy Drive, Copy disk to PC and vise versa</link>, How to use a PC 3.5&quot; floppy drive in the 1581 device</listitem><listitem><link type='external' href='http://vice-emu.sourceforge.net/plain/drive_info.txt'>vice-emu: Commodore compatible Disk Drives</link>, drive info</listitem><listitem><link type='external' href='http://www.students.tut.fi/%7eleinone3/dcn2692/index.html'>tut.fi: DCN-2692 floppy controller board</link>, C1581 clone (complete)</listitem></list><paragraph><template><target>Commodore disk drives</target></template></paragraph><paragraph><link><target>Category:Products introduced in 1987</target></link><link><target>Category:Commodore 64</target></link></paragraph></article>