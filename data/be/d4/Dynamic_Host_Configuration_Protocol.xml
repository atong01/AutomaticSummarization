<article title='Dynamic_Host_Configuration_Protocol'><paragraph><template><target>Redirect</target><arg>DHCP</arg></template><template><target>Refimprove</target><arg name="date">April 2010</arg></template><template><target>IPstack</target></template></paragraph><paragraph>The<space/><bold>Dynamic Host Configuration Protocol</bold><space/>(<bold>DHCP</bold>) is a standardized<space/><link><target>network protocol</target></link><space/>used on<space/><link><target>Internet Protocol</target></link><space/>(IP) networks for dynamically distributing network configuration parameters, such as<space/><link><target>IP address</target><trail>es</trail></link><space/>for interfaces and services. With DHCP, computers request IP addresses and networking parameters automatically from a DHCP server, reducing the need for a<space/><link><target>network administrator</target></link><space/>or a user to configure these settings manually.</paragraph><heading level='2'><template><target>Anchor</target><arg>LEASE</arg></template>Overview</heading><paragraph>Computers use the Dynamic Host Configuration Protocol to request Internet Protocol parameters from a network server, such as an<space/><link><target>IP address</target></link>. The protocol operates based on the<space/><link><target>clientserver model</target></link>.<space/><template><target>As of</target><arg>2011</arg></template>, modern networks ranging in size from<space/><link><target>home network</target><trail>s</trail></link><space/>to large<space/><link><target>campus network</target><trail>s</trail></link><space/>and regional<space/><link><target>Internet service provider</target></link><space/>networks commonly use DHCP.<extension extension_name='ref'>Peterson LL, Davie BS. (2011).<space/><link type='external' href='http://books.google.com/books?id=BvaFreun1W8C&amp;amp;pg=PA372&amp;amp;lpg=PA372'>Computer Networks: A Systems Approach</link>.</extension><space/>Most residential network routers receive a globally unique IP address within the provider network. Within a local network, DHCP assigns a local IP address to devices connected to the local network.</paragraph><paragraph>When a computer or other networked device connects to a network, the DHCP client software sends a<space/><link><target>Broadcasting (computing)</target><part>broadcast</part></link><space/>query requesting necessary information. Any DHCP server on the network may service the request. The DHCP server manages a pool of IP addresses and information about client configuration parameters such as<space/><link><target>default gateway</target></link>,<space/><link><target>domain name</target></link>, the<space/><link><target>name server</target><trail>s</trail></link>, and<space/><link><target>time server</target><trail>s</trail></link>. On receiving a request, the server may respond with specific information for each client, as previously configured by an administrator, or with a specific address and any other information valid for the entire network and for the time period for which the allocation (<italics>lease</italics>) is valid. A client typically queries for this information immediately after<space/><link><target>booting</target></link>, and periodically thereafter before the expiration of the information. When a DHCP client refreshes an assignment, it initially requests the same parameter values, but the DHCP server may assign a new address based on the assignment policies set by administrators.</paragraph><paragraph>On large networks that consist of multiple links, a single DHCP server may service the entire network when aided by DHCP relay agents located on the interconnecting routers. Such agents relay messages between DHCP clients and DHCP servers located on different subnets.</paragraph><paragraph>Depending on implementation, the DHCP server may have three methods of allocating IP addresses:</paragraph><list type='bullet'><listitem><italics>Dynamic allocation</italics>: a<space/><link><target>network administrator</target></link><space/>reserves a range of IP addresses for DHCP, and each DHCP client on the LAN is configured to request an IP address from the DHCP<space/><link><target>Server (computing)</target><part>server</part></link><space/>during network initialization. The request-and-grant process uses a lease concept with a controllable time period, allowing the DHCP server to reclaim (and then reallocate) IP addresses that are not renewed.</listitem><listitem><italics>Automatic allocation</italics>: the DHCP server permanently assigns an IP address to a requesting client from the range defined by the administrator. This is like dynamic allocation, but the DHCP server keeps a table of past IP address assignments, so that it can preferentially assign to a client the same IP address that the client previously had.</listitem><listitem><italics>Manual allocation</italics>: commonly called<space/><italics>Static allocation</italics>, the DHCP server allocates an IP address based on a preconfigured mapping to each client's<space/><link><target>MAC address</target></link>. This feature is variously called<space/><italics>static DHCP assignment</italics><space/>by<space/><link><target>DD-WRT</target></link>,<space/><italics>fixed-address</italics><space/>by the dhcpd documentation,<space/><italics>address reservation</italics><space/>by Netgear,<space/><italics>DHCP reservation</italics><space/>or<space/><italics>static DHCP</italics><space/>by<space/><link><target>Cisco</target></link><space/>and<space/><link><target>Linksys</target></link>, and<space/><italics>IP address reservation</italics><space/>or<space/><italics>MAC/IP address binding</italics><space/>by various other router manufacturers.</listitem></list><paragraph>DHCP is used for<space/><link><target>IPv4</target><part>Internet Protocol version 4</part></link><space/>(IPv4), as well as for<space/><link><target>IPv6</target></link>. While both versions serve the same purpose, the details of the protocol for IPv4 and IPv6 differ sufficiently that they may be considered separate protocols.<extension extension_name='ref'><template><target>cite book</target><arg name="title"><space/>The DHCP Handbook
</arg><arg name="year"><space/>2003
</arg><arg name="isbn"><space/>0-672-32327-3
</arg><arg name="author"><space/>Ralph Droms
</arg><arg name="author2"><space/>Ted Lemon
</arg><arg name="publisher"><space/>[[SAMS Publishing]]
</arg><arg name="page"><space/>436
</arg></template></extension><space/>For the<space/><link><target>IPv6</target></link><space/>operation, devices may alternatively use<space/><link><target>IPv6 stateless address autoconfiguration</target><part>stateless address autoconfiguration</part></link>. IPv6 hosts may also use<space/><link><target>link-local addressing</target></link><space/>to achieve operation restricted to the local network link.</paragraph><heading level='2'>History</heading><paragraph>In 1984, the Reverse Address Resolution Protocol (<link><target>RARP</target></link>), defined in RFC 903, was introduced to allow simple devices such as<space/><link><target>diskless workstation</target><trail>s</trail></link><space/>to dynamically obtain a suitable IP address. However, because it acted at the<space/><link><target>data link layer</target></link><space/>it made implementation difficult on many server platforms, and also required that a server be present on each individual network link. Soon afterwards it was superseded by the &quot;Bootstrap Protocol&quot; (<link><target>BOOTP</target></link>) defined in RFC 951. This introduced the concept of a<space/><italics>relay agent</italics>, which allowed the forwarding of BOOTP packets across networks, allowing one central BOOTP server to serve hosts on many IP subnets.<extension extension_name='ref'><template><target>cite web</target><arg name="url">http://tools.ietf.org/html/rfc951#section-6<space/></arg><arg name="title">RFC 951 - Bootstrap Protocol<space/></arg><arg name="author">Bill Croft</arg><arg name="author2">John Gilmore</arg><arg name="date">September 1985</arg><arg name="work">Network Working Group<space/></arg></template></extension></paragraph><paragraph>DHCP is based on BOOTP but can dynamically allocate IP addresses from a pool and reclaim them when they are no longer in use. It can also be used to deliver a wide range of extra configuration parameters to IP clients, including platform-specific parameters.<extension extension_name='ref' name="Network+ certification">[,Network+ Certification 2006 Published By Microsoft Press.</extension><space/>It was first defined in RFC 1531 in October 1993; but due to errors in the editorial process was almost immediately reissued as RFC 1541.</paragraph><paragraph>Four years later the DHCPINFORM message type<extension extension_name='ref'>used for the Web Proxy Autodiscovery Protocol<space/><link><target>Web Proxy Autodiscovery Protocol</target><part>WPAD</part></link></extension><space/>and other small changes were added by RFC 2131; which<space/><template><target>as of</target><arg><space/>2014<space/></arg><arg name="lc"><space/>on</arg></template><space/>remains the standard for IPv4 networks.</paragraph><paragraph><link><target>DHCPv6</target></link><space/>was initially described by RFC 3315 in 2003, but this has been updated by many subsequent RFCs.<extension extension_name='ref'>RFC 4361, RFC 5494, RFC 6221, RFC 6422, RFC 6644, RFC 7083, RFC 7227, RFC 7283</extension><space/>RFC 3633 added a DHCPv6 mechanism for<space/><link><target>prefix delegation</target></link>, and<space/><link><target>stateless address autoconfiguration</target></link><space/>was added by RFC 3736.</paragraph><heading level='2'>Operation</heading><paragraph><link><target>File:DHCP session.svg</target><part>thumb</part><part>right</part><part>upright=1.2</part><part>An illustration of a typical non-renewing DHCP session; each message may be either a broadcast or a unicast, depending on the DHCP client capabilities.<extension extension_name='ref'><link type='external' href='https://tools.ietf.org/html/rfc2131#section-4.1'>RFC 2131, Section 4.1 Constructing and sending DHCP messages</link></extension></part></link></paragraph><paragraph>The DHCP employs a<space/><link><target>Connectionless communication</target><part>connectionless</part></link><space/>service model, using the<space/><link><target>User Datagram Protocol</target></link><space/>(UDP). It is implemented with two UDP port numbers for its operations which are the same as for the<space/><link><target>BOOTP</target></link><space/>protocol. UDP port number 67 is the destination port of a server, and UDP port number 68 is used by the client.</paragraph><paragraph>DHCP operations fall into four phases: server discovery, IP lease offer, IP request, and IP lease acknowledgment. These stages are often abbreviated as DORA for discovery, offer, request, and acknowledgment.</paragraph><paragraph>The DHCP operation begins with clients<space/><link><target>Broadcasting (computing)</target><part>broadcasting</part></link><space/>a request. If the client and server are on different subnets, a<space/><link><target>Dynamic Host Configuration Protocol#DHCP relaying</target><part>DHCP Helper or DHCP Relay Agent</part></link><space/>may be used. Clients requesting renewal of an existing lease may communicate directly via UDP<space/><link><target>unicast</target></link>, since the client already has an established IP address at that point.</paragraph><heading level='3'>DHCP discovery</heading><paragraph>The client broadcasts messages on the network subnet using the destination address 255.255.255.255 or the specific subnet broadcast address. A DHCP client may also request its last-known IP address. If the client remains connected to the same network, the server may grant the request. Otherwise, it depends whether the server is set up as authoritative or not. An authoritative server denies the request, causing the client to issue a new request. A non-authoritative server simply ignores the request, leading to an implementation-dependent timeout for the client to expire the request and ask for a new IP address.</paragraph><table class="wikitable"><tablecaption>DHCPDISCOVER message</tablecaption><tablerow><tablecell colspan="4"><link><target>User Datagram Protocol</target><part>UDP</part></link><space/>Src=0.0.0.0 sPort=68<xhtml:br></xhtml:br>Dest=255.255.255.255 dPort=67</tablecell></tablerow><tablerow><tablehead>OP</tablehead><tablehead>HTYPE</tablehead><tablehead>HLEN</tablehead><tablehead>HOPS</tablehead></tablerow><tablerow><tablecell>0x01</tablecell><tablecell>0x01</tablecell><tablecell>0x06</tablecell><tablecell>0x00</tablecell></tablerow><tablerow><tablehead colspan="4">XID</tablehead></tablerow><tablerow><tablecell colspan="4">0x3903F326</tablecell></tablerow><tablerow><tablehead colspan="2">SECS</tablehead><tablehead colspan="2">FLAGS</tablehead></tablerow><tablerow><tablecell colspan="2">0x0000</tablecell><tablecell colspan="2">0x0000</tablecell></tablerow><tablerow><tablehead colspan="4">CIADDR (Client IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">YIADDR (Your IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">SIADDR (Server IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">GIADDR (Gateway IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">CHADDR (Client hardware address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00053C04</tablecell></tablerow><tablerow><tablecell colspan="4">0x8D590000</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablecell colspan="4">192 octets of 0s, or overflow space for additional options.<space/><link><target>BOOTP</target></link><space/>legacy</tablecell></tablerow><tablerow><tablehead colspan="4"><link><target>Magic cookie</target></link></tablehead></tablerow><tablerow><tablecell colspan="4">0x63825363</tablecell></tablerow><tablerow><tablehead colspan="4">DHCP Options</tablehead></tablerow><tablerow><tablecell colspan="4">DHCP option 53: DHCP Discover</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 50: 192.168.1.100 requested</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 55: Parameter Request List:Request Subnet Mask (1),Router (3),Domain Name (15),Domain Name Server (6)</tablecell></tablerow></table><heading level='3'>DHCP offer</heading><paragraph>When a DHCP server receives a DHCPDISCOVER message from a client, which is an IP address lease request, the server reserves an IP address for the client and makes a lease offer by sending a DHCPOFFER message to the client. This message contains the client's MAC address, the IP address that the server is offering, the subnet mask, the lease duration, and the IP address of the DHCP server making the offer.</paragraph><paragraph>The server determines the configuration based on the client's hardware address as specified in the CHADDR (client hardware address) field. Here the server, 192.168.1.1, specifies the client's IP address in the YIADDR (your IP address) field.</paragraph><table class="wikitable"><tablecaption>DHCPOFFER message</tablecaption><tablerow><tablecell colspan="4">UDP Src=192.168.1.1 sPort=67<space/><xhtml:br></xhtml:br><space/>Dest=255.255.255.255 | dPort=68</tablecell></tablerow><tablerow><tablehead>OP</tablehead><tablehead>HTYPE</tablehead><tablehead>HLEN</tablehead><tablehead>HOPS</tablehead></tablerow><tablerow><tablecell>0x02</tablecell><tablecell>0x01</tablecell><tablecell>0x06</tablecell><tablecell>0x00</tablecell></tablerow><tablerow><tablehead colspan="4">XID</tablehead></tablerow><tablerow><tablecell colspan="4">0x3903F326</tablecell></tablerow><tablerow><tablehead colspan="2">SECS</tablehead><tablehead colspan="2">FLAGS</tablehead></tablerow><tablerow><tablecell colspan="2">0x0000</tablecell><tablecell colspan="2">0x0000</tablecell></tablerow><tablerow><tablehead colspan="4">CIADDR (Client IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="5">YIADDR (Your IP address)</tablehead></tablerow><tablerow><tablecell colspan="5">0xC0A80164</tablecell></tablerow><tablerow><tablehead colspan="4">SIADDR (Server IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0xC0A80101</tablecell></tablerow><tablerow><tablehead colspan="4">GIADDR (Gateway IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">CHADDR (Client hardware address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00053C04</tablecell></tablerow><tablerow><tablecell colspan="4">0x8D590000</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablecell colspan="4">192 octets of 0s.<space/><link><target>BOOTP</target></link><space/>legacy</tablecell></tablerow><tablerow><tablehead colspan="4"><link><target>Magic cookie</target></link></tablehead></tablerow><tablerow><tablecell colspan="4">0x63825363</tablecell></tablerow><tablerow><tablehead colspan="4">DHCP Options</tablehead></tablerow><tablerow><tablecell colspan="4">DHCP option 53: DHCP Offer</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 1: 255.255.255.0 subnet mask</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 3: 192.168.1.1 router</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 51: 86400s (1 day) IP address lease time</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 54: 192.168.1.1 DHCP server</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 6: DNS servers 9.7.10.15, 9.7.10.16, 9.7.10.18</tablecell></tablerow></table><heading level='3'>DHCP request</heading><paragraph>In response to the DHCP offer, the client replies with a DHCP request, broadcast to the server,<template><target>Efn</target><arg name="name">"optional-unicasts"</arg><arg>As an optional client behavior, some broadcasts, such as those carrying DHCP discovery and request messages, may be replaced with unicasts in case the DHCP client already knows the DHCP server's IP address.<ref>[https://tools.ietf.org/html/rfc2131#section-4.4.4 RFC 2131, Section 4.4.4: Use of broadcast and unicast]</ref></arg></template><space/>requesting the offered address. A client can receive DHCP offers from multiple servers, but it will accept only one DHCP offer. Based on required<space/><italics>server identification</italics><space/>option in the request and broadcast messaging, servers are informed whose offer the client has accepted.<extension extension_name='ref' name="rfc2131"><template><target>cite IETF</target><arg name="title"><space/>DHCP Options and BOOTP Vendor Extensions
</arg><arg name="rfc"><space/>2131
</arg><arg name="last1"><space/>Droms
</arg><arg name="first1"><space/>Ralph
</arg><arg name="year"><space/>1997
</arg><arg name="month"><space/>March
</arg><arg name="publisher"><space/>[[Internet Engineering Task Force|IETF]]
</arg><arg name="accessdate"><space/>September 9, 2014
</arg></template></extension><template><target>rp</target><arg>Section 3.1, Item 3</arg></template><space/>When other DHCP servers receive this message, they withdraw any offers that they might have made to the client and return the offered address to the pool of available addresses.</paragraph><table class="wikitable"><tablecaption>DHCPREQUEST message</tablecaption><tablerow><tablecell colspan="4">UDP Src=0.0.0.0 sPort=68<xhtml:br></xhtml:br>Dest=255.255.255.255<template><target>Efn</target><arg name="name">"optional-unicasts"</arg></template><space/>dPort=67</tablecell></tablerow><tablerow><tablehead>OP</tablehead><tablehead>HTYPE</tablehead><tablehead>HLEN</tablehead><tablehead>HOPS</tablehead></tablerow><tablerow><tablecell>0x01</tablecell><tablecell>0x01</tablecell><tablecell>0x06</tablecell><tablecell>0x00</tablecell></tablerow><tablerow><tablehead colspan="5">XID</tablehead></tablerow><tablerow><tablecell colspan="5">0x3903F326</tablecell></tablerow><tablerow><tablehead colspan="2">SECS</tablehead><tablehead colspan="2">FLAGS</tablehead></tablerow><tablerow><tablecell colspan="2">0x0000</tablecell><tablecell colspan="2">0x0000</tablecell></tablerow><tablerow><tablehead colspan="4">CIADDR (Client IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">YIADDR (Your IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">SIADDR (Server IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0xC0A80101</tablecell></tablerow><tablerow><tablehead colspan="4">GIADDR (Gateway IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">CHADDR (Client hardware address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00053C04</tablecell></tablerow><tablerow><tablecell colspan="4">0x8D590000</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablecell colspan="4">192 octets of 0s.<space/><link><target>BOOTP</target></link><space/>legacy</tablecell></tablerow><tablerow><tablehead colspan="4"><link><target>Magic cookie</target></link></tablehead></tablerow><tablerow><tablecell colspan="4">0x63825363</tablecell></tablerow><tablerow><tablehead colspan="4">DHCP Options</tablehead></tablerow><tablerow><tablecell colspan="4">DHCP option 53: DHCP Request</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 50: 192.168.1.100 requested</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 54: 192.168.1.1 DHCP server.</tablecell></tablerow></table><heading level='3'>DHCP acknowledgement</heading><paragraph>When the DHCP server receives the DHCPREQUEST message from the client, the configuration process enters its final phase. The acknowledgement phase involves sending a DHCPACK packet to the client. This packet includes the lease duration and any other configuration information that the client might have requested. At this point, the IP configuration process is completed.</paragraph><paragraph>The protocol expects the DHCP client to configure its network interface with the negotiated parameters.</paragraph><paragraph>After the client obtains an IP address, it should probe the newly received address<extension extension_name='ref'>RFC2131 Dynamic Host Configuration Protocol: Dynamic allocation of network addresses http://tools.ietf.org/html/rfc2131#section-2.2</extension><space/>(e.g. with ARP<space/><link><target>Address Resolution Protocol</target></link>) to prevent address conflicts caused by overlapping address pools of DHCP servers.</paragraph><table class="wikitable"><tablecaption>DHCPACK message</tablecaption><tablerow><tablecell colspan="4">UDP Src=192.168.1.1 sPort=67<xhtml:br></xhtml:br>Dest=255.255.255.255 dPort=68</tablecell></tablerow><tablerow><tablehead>OP</tablehead><tablehead>HTYPE</tablehead><tablehead>HLEN</tablehead><tablehead>HOPS</tablehead></tablerow><tablerow><tablecell>0x02</tablecell><tablecell>0x01</tablecell><tablecell>0x06</tablecell><tablecell>0x00</tablecell></tablerow><tablerow><tablehead colspan="5">XID</tablehead></tablerow><tablerow><tablecell colspan="5">0x3903F326</tablecell></tablerow><tablerow><tablehead colspan="3">SECS</tablehead><tablehead colspan="2">FLAGS</tablehead></tablerow><tablerow><tablecell colspan="2">0x0000</tablecell><tablecell colspan="2">0x0000</tablecell></tablerow><tablerow><tablehead colspan="4">CIADDR (Client IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">YIADDR (Your IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0xC0A80164</tablecell></tablerow><tablerow><tablehead colspan="4">SIADDR (Server IP address)</tablehead></tablerow><tablerow><tablecell colspan="4">0xC0A80101</tablecell></tablerow><tablerow><tablehead colspan="4">GIADDR (Gateway IP address switched by relay)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablehead colspan="4">CHADDR (Client hardware address)</tablehead></tablerow><tablerow><tablecell colspan="4">0x00053C04</tablecell></tablerow><tablerow><tablecell colspan="4">0x8D590000</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000&lt;/tt&gt;</tablecell></tablerow><tablerow><tablecell colspan="4">0x00000000</tablecell></tablerow><tablerow><tablecell colspan="4">192 octets of 0s.<space/><link><target>BOOTP</target></link><space/>legacy</tablecell></tablerow><tablerow><tablehead colspan="4"><link><target>Magic cookie</target></link></tablehead></tablerow><tablerow><tablecell colspan="4">0x63825363</tablecell></tablerow><tablerow><tablehead colspan="4">DHCP Options</tablehead></tablerow><tablerow><tablecell colspan="4">DHCP option 53: DHCP ACK (value=5) or DHCP NAK (value=6)</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 1: 255.255.255.0 subnet mask</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 3: 192.168.1.1 router</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 51: 86400s (1 day) IP address lease time</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 54: 192.168.1.1 DHCP server</tablecell></tablerow><tablerow><tablecell colspan="4">DHCP option 6: DNS servers 9.7.10.15, 9.7.10.16, 9.7.10.18</tablecell></tablerow></table><heading level='3'>DHCP information</heading><paragraph>A DHCP client may request more information than the server sent with the original DHCPOFFER. The client may also request repeat data for a particular application. For example, browsers use<space/><italics>DHCP Inform</italics><space/>to obtain web proxy settings via<space/><link><target>Web Proxy Autodiscovery Protocol</target><part>WPAD</part></link>.</paragraph><heading level='3'>DHCP releasing</heading><paragraph>The client sends a request to the DHCP server to release the DHCP information and the client deactivates its IP address. As client devices usually do not know when users may unplug them from the network, the protocol does not mandate the sending of<space/><italics>DHCP Release</italics>.</paragraph><heading level='2'>Client configuration parameters</heading><paragraph>A DHCP server can provide optional configuration parameters to the client. RFC 2132 describes the available DHCP options defined by<space/><link><target>Internet Assigned Numbers Authority</target></link><space/>(IANA) - DHCP and BOOTP PARAMETERS.<extension extension_name='ref'><template><target>cite web</target><arg name="url">http://www.iana.org/assignments/bootp-dhcp-parameters<space/></arg><arg name="title">Dynamic Host Configuration Protocol (DHCP) and Bootstrap Protocol (BOOTP) Parameters<space/></arg><arg name="publisher">Iana.org<space/></arg><arg name="date"><space/></arg><arg name="accessdate">2013-11-28</arg></template></extension></paragraph><paragraph>A DHCP client can select, manipulate and overwrite parameters provided by a DHCP server.<extension extension_name='ref'>In Unix-like systems this client-level refinement typically takes place according to the values in a<space/><xhtml:code>/etc/dhclient.conf</xhtml:code><space/>configuration file.</extension></paragraph><heading level='2'>DHCP options</heading><paragraph>Options are variable length octet strings. The first octet is the option code, the second octet is the number of following octets and the remaining octets are code dependent.For example, the DHCP Message type option for an Offer would appear as 0x35,0x01,0x02, where 0x35 is code 53 for &quot;DHCP Message Type&quot;, 0x01 means one octet follows and 0x02 is the value of &quot;Offer&quot;.</paragraph><paragraph>The following tables list the available DHCP options, as stated in RFC2132.<extension extension_name='ref' name="rfc2132"><template><target>cite IETF</target><arg name="title"><space/>DHCP Options and BOOTP Vendor Extensions
</arg><arg name="rfc"><space/>2132
</arg><arg name="last1"><space/>Alexander
</arg><arg name="first1"><space/>Steve
</arg><arg name="last2"><space/>Droms
</arg><arg name="first2"><space/>Ralph
</arg><arg name="year"><space/>1997
</arg><arg name="month"><space/>March
</arg><arg name="publisher"><space/>[[Internet Engineering Task Force|IETF]]
</arg><arg name="accessdate"><space/>June 10, 2012
</arg></template></extension></paragraph><table class="wikitable sortable"><tablecaption>RFC1497 vendor extensions<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 3</arg></template></tablecaption><tablerow><tablehead>Code</tablehead><tablehead>Name</tablehead><tablehead>Length</tablehead><tablehead>Notes</tablehead></tablerow><tablerow><tablecell>0</tablecell><tablecell>Pad<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 3.1</arg></template></tablecell><tablecell>0<space/><link><target>Octet (computing)</target><part>octets</part></link></tablecell><tablecell>Can be used to pad other options so that they are aligned to the word boundary; is not followed by length byte</tablecell></tablerow><tablerow><tablecell>1</tablecell><tablecell>Subnet Mask<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 3.3</arg></template></tablecell><tablecell>4 octets</tablecell><tablecell>Must be sent after the router option (option 3) if both are included</tablecell></tablerow><tablerow><tablecell>2</tablecell><tablecell>Time Offset<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 3.4</arg></template></tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>3</tablecell><tablecell>Router</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell>Available routers, should be listed in order of preference</tablecell></tablerow><tablerow><tablecell>4</tablecell><tablecell>Time Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell>Available time servers to synchronise with, should be listed in order of preference</tablecell></tablerow><tablerow><tablecell>5</tablecell><tablecell>Name Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell>Available<space/><link><target>IEN 116</target></link><space/>name servers, should be listed in order of preference</tablecell></tablerow><tablerow><tablecell>6</tablecell><tablecell>Domain Name Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell>Available<space/><link><target>Domain Name System</target><part>DNS</part></link><space/>servers, should be listed in order of preference</tablecell></tablerow><tablerow><tablecell>7</tablecell><tablecell>Log Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell>Available log servers, should be listed in order of preference.</tablecell></tablerow><tablerow><tablecell>8</tablecell><tablecell>Cookie Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>9</tablecell><tablecell>LPR Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>10</tablecell><tablecell>Impress Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>11</tablecell><tablecell>Resource Location Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>12</tablecell><tablecell>Host Name</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>13</tablecell><tablecell>Boot File Size</tablecell><tablecell>2 octets</tablecell><tablecell>Length of the boot image in 4KiB blocks</tablecell></tablerow><tablerow><tablecell>14</tablecell><tablecell>Merit Dump File</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell>Path where crash dumps should be stored</tablecell></tablerow><tablerow><tablecell>15</tablecell><tablecell>Domain Name</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>16</tablecell><tablecell>Swap Server</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>17</tablecell><tablecell>Root Path</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>18</tablecell><tablecell>Extensions Path</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>255</tablecell><tablecell>End</tablecell><tablecell>0 octets</tablecell><tablecell>Used to mark the end of the vendor option field</tablecell></tablerow></table><table class="wikitable sortable"><tablecaption>IP Layer Parameters per Host<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 4</arg></template></tablecaption><tablerow><tablehead>Code</tablehead><tablehead>Name</tablehead><tablehead>Length</tablehead><tablehead>Notes</tablehead></tablerow><tablerow><tablecell>19</tablecell><tablecell>IP Forwarding Enable/Disable</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>20</tablecell><tablecell>Non-Local Source Routing Enable/Disable</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>21</tablecell><tablecell>Policy Filter</tablecell><tablecell>multiples of 8 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>22</tablecell><tablecell>Maximum Datagram Reassembly Size</tablecell><tablecell>2 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>23</tablecell><tablecell>Default IP Time-to-live</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>24</tablecell><tablecell>Path MTU Aging Timeout</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>25</tablecell><tablecell>Path MTU Plateau Table</tablecell><tablecell>multiples of 2 octets</tablecell><tablecell></tablecell></tablerow></table><table class="wikitable sortable"><tablecaption>IP Layer Parameters per Interface<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 5</arg></template></tablecaption><tablerow><tablehead>Code</tablehead><tablehead>Name</tablehead><tablehead>Length</tablehead><tablehead>Notes</tablehead></tablerow><tablerow><tablecell>26</tablecell><tablecell>Interface MTU</tablecell><tablecell>2 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>27</tablecell><tablecell>All Subnets are Local</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>28</tablecell><tablecell>Broadcast Address</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>29</tablecell><tablecell>Perform Mask Discovery</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>30</tablecell><tablecell>Mask Supplier</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>31</tablecell><tablecell>Perform Router Discovery</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>32</tablecell><tablecell>Router Solicitation Address</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>33</tablecell><tablecell>Static Route</tablecell><tablecell>multiples of 8 octets</tablecell><tablecell>A list of destination/router pairs</tablecell></tablerow></table><table class="wikitable sortable"><tablecaption>Link Layer Parameters per Interface<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 6</arg></template></tablecaption><tablerow><tablehead>Code</tablehead><tablehead>Name</tablehead><tablehead>Length</tablehead><tablehead>Notes</tablehead></tablerow><tablerow><tablecell>34</tablecell><tablecell>Trailer Encapsulation Option</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>35</tablecell><tablecell>ARP Cache Timeout</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>36</tablecell><tablecell>Ethernet Encapsulation</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow></table><table class="wikitable sortable"><tablecaption>TCP Parameters<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 7</arg></template></tablecaption><tablerow><tablehead>Code</tablehead><tablehead>Name</tablehead><tablehead>Length</tablehead><tablehead>Notes</tablehead></tablerow><tablerow><tablecell>37</tablecell><tablecell>TCP Default TTL</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>38</tablecell><tablecell>TCP Keepalive Interval</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>39</tablecell><tablecell>TCP Keepalive Garbage</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow></table><table class="wikitable sortable"><tablecaption>Application and Service Parameters<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 8</arg></template></tablecaption><tablerow><tablehead>Code</tablehead><tablehead>Name</tablehead><tablehead>Length</tablehead><tablehead>Notes</tablehead></tablerow><tablerow><tablecell>40</tablecell><tablecell>Network Information Service Domain</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>41</tablecell><tablecell>Network Information Servers</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>42</tablecell><tablecell>Network Time Protocol Servers</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>43</tablecell><tablecell>Vendor Specific Information</tablecell><tablecell>minimum of 1 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>44</tablecell><tablecell>NetBIOS over TCP/IP Name Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>45</tablecell><tablecell>NetBIOS over TCP/IP Datagram Distribution Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>46</tablecell><tablecell>NetBIOS over TCP/IP Node Type</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>47</tablecell><tablecell>NetBIOS over TCP/IP Scope</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>48</tablecell><tablecell>X Window System Font Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>49</tablecell><tablecell>X Window System Display Manager</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>64</tablecell><tablecell>Network Information Service+ Domain</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>65</tablecell><tablecell>Network Information Service+ Servers</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>68</tablecell><tablecell>Mobile IP Home Agent</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>69</tablecell><tablecell>Simple Mail Transport Protocol (SMTP) Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>70</tablecell><tablecell>Post Office Protocol (POP3) Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>71</tablecell><tablecell>Network News Transport Protocol (NNTP) Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>72</tablecell><tablecell>Default World Wide Web (WWW) Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>73</tablecell><tablecell>Default Finger Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>74</tablecell><tablecell>Default Internet Relay Chat (IRC) Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>75</tablecell><tablecell>StreetTalk Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>76</tablecell><tablecell>StreetTalk Directory Assistance (STDA) Server</tablecell><tablecell>multiples of 4 octets</tablecell><tablecell></tablecell></tablerow></table><table class="wikitable sortable"><tablecaption>DHCP Extensions<extension extension_name='ref' name="rfc2132"></extension><template><target>rp</target><arg>Section 9</arg></template></tablecaption><tablerow><tablehead>Code</tablehead><tablehead>Name</tablehead><tablehead>Length</tablehead><tablehead>Notes</tablehead></tablerow><tablerow><tablecell>50</tablecell><tablecell>Requested IP address</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>51</tablecell><tablecell>IP address Lease Time</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>52</tablecell><tablecell>Option Overload</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>53</tablecell><tablecell>DHCP Message Type</tablecell><tablecell>1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>54</tablecell><tablecell>Server Identifier</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>55</tablecell><tablecell>Parameter Request List</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>56</tablecell><tablecell>Message</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>57</tablecell><tablecell>Maximum DHCP Message Size</tablecell><tablecell>2 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>58</tablecell><tablecell>Renewal (T1) Time Value</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>59</tablecell><tablecell>Rebinding (T2) Time Value</tablecell><tablecell>4 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>60</tablecell><tablecell>Vendor class identifier</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>61</tablecell><tablecell>Client-identifier</tablecell><tablecell>minimum of 2 octets</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>66</tablecell><tablecell>TFTP server name</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow><tablerow><tablecell>67</tablecell><tablecell>Bootfile name</tablecell><tablecell>minimum of 1 octet</tablecell><tablecell></tablecell></tablerow></table><heading level='3'>Vendor identification</heading><paragraph>An option exists to identify the vendor and functionality of a DHCP client. The information is a variable-length string of characters or octets which has a meaning specified by the vendor of the DHCP client. One method that a DHCP client can utilize to communicate to the server that it is using a certain type of hardware or firmware is to set a value in its DHCP requests called the Vendor Class Identifier (VCI) (Option 60).</paragraph><paragraph>This method allows a DHCP server to differentiate between the two kinds of client machines and process the requests from the two types of modems appropriately. Some types of set-top boxes also set the VCI (Option 60) to inform the DHCP server about the hardware type and functionality of the device. The value this option is set to gives the DHCP server a hint about any required extra information that this client needs in a DHCP response.</paragraph><heading level='2'>DHCP relaying</heading><paragraph>In small networks, where only one IP subnet is being managed, DHCP clients communicate directly with DHCP servers. However, DHCP servers can also provide IP addresses for multiple subnets. In this case, a DHCP client that has not yet acquired an IP address cannot communicate directly with the DHCP server using IP routing, because it does not have a routable IP address, nor does it know the IP address of a router.</paragraph><paragraph>In order to allow DHCP clients on subnets not directly served by DHCP servers to communicate with DHCP servers, DHCP relay agents can be installed on these subnets. The DHCP client broadcasts on the local link; the relay agent receives the broadcast and transmits it to one or more DHCP servers using<space/><link><target>unicast</target></link>. The relay agent stores its own IP address in the GIADDR field of the DHCP packet. The DHCP server uses the GIADDR to determine the subnet on which the relay agent received the broadcast, and allocates an IP address on that subnet. When the DHCP server replies to the client, it sends the reply to the GIADDR address, again using unicast. The relay agent then retransmits the response on the local network.</paragraph><heading level='2'>Reliability</heading><paragraph>The DHCP protocol ensures reliability in several ways: periodic renewal, rebinding,<extension extension_name='ref' name="rfc2131"></extension><template><target>rp</target><arg>Section 4.4.5</arg></template><space/>and failover. DHCP clients are allocated leases that last for some period of time. Clients begin to attempt to renew their leases once half the lease interval has expired.<extension extension_name='ref' name="rfc2131"></extension><template><target>rp</target><arg>Section 4.4.5 Paragraph 3</arg></template><space/>They do this by sending a unicast DHCPREQUEST message to the DHCP server that granted the original lease. If that server is down or unreachable, it will fail to respond to the DHCPREQUEST. However, in that case the client repeats the DHCPREQUEST from time to time,<extension extension_name='ref' name="rfc2131"></extension><template><target>rp</target><arg>Section 4.4.5 Paragraph 8</arg></template><template><target>Efn</target><arg>The RFC calls for the client to wait one half of the remaining time until T2 before it retransmits the DHCPREQUEST packet</arg></template><space/>so if the DHCP server comes back up or becomes reachable again, the DHCP client will succeed in contacting it and renew the lease.</paragraph><paragraph>If the DHCP server is unreachable for an extended period of time,<extension extension_name='ref' name="rfc2131"></extension><template><target>rp</target><arg>Section 4.4.5 Paragraph 5</arg></template><space/>the DHCP client will attempt to rebind, by broadcasting its DHCPREQUEST rather than unicasting it. Because it is broadcast, the DHCPREQUEST message will reach all available DHCP servers. If some other DHCP server is able to renew the lease, it will do so at this time.</paragraph><paragraph>In order for rebinding to work, when the client successfully contacts a backup DHCP server, that server must have accurate information about the client's binding. Maintaining accurate binding information between two servers is a complicated problem; if both servers are able to update the same lease database, there must be a mechanism to avoid conflicts between updates on the independent servers. A proposal for implementing<space/><link><target>Fault-tolerant design</target><part>fault-tolerant</part></link><space/>DHCP servers was submitted<template><target>by whom?</target><arg name="date">July 2015</arg></template><space/>to the Internet Engineering Task Force, but never formalized<extension extension_name='ref'><template><target>cite IETF</target><arg name="title"><space/>DHCP Failover Protocol
</arg><arg name="draft"><space/>draft-ietf-dhc-failover-12
</arg><arg name="last1"><space/>Droms<space/></arg><arg name="first1"><space/>Ralph
</arg><arg name="last2"><space/>Kinnear<space/></arg><arg name="first2"><space/>Kim
</arg><arg name="last3"><space/>Stapp<space/></arg><arg name="first3"><space/>Mark
</arg><arg name="last4"><space/>Volz<space/></arg><arg name="first4"><space/>Bernie
</arg><arg name="last5"><space/>Gonczi<space/></arg><arg name="first5"><space/>Steve
</arg><arg name="last6"><space/>Rabil<space/></arg><arg name="first6"><space/>Greg
</arg><arg name="last7"><space/>Dooley<space/></arg><arg name="first7"><space/>Michael
</arg><arg name="last8"><space/>Kapur<space/></arg><arg name="first8"><space/>Arun
</arg><arg name="date"><space/>March 2003
</arg><arg name="publisher"><space/>[[Internet Engineering Task Force|IETF]]
</arg><arg name="accessdate"><space/>May 09, 2010
</arg></template></extension><template><target>Efn</target><arg>The proposal provided a mechanism whereby two servers could remain loosely in sync with each other in such a way that even in the event of a total failure of one server, the other server could recover the lease database and continue operating. Due to the length and complexity of the specification, it was never published as a standard; however, the techniques described in the specification are in wide use, with one open-source implementation in the ISC DHCP server, as well as several commercial implementations.</arg></template></paragraph><paragraph>If rebinding fails, the lease will eventually expire. When the lease expires, the client must stop using the IP address granted to it in its lease.<extension extension_name='ref' name="rfc2131"></extension><template><target>rp</target><arg>Section 4.4.5 Paragraph 9</arg></template><space/>At that time it will restart the DHCP process from the beginning by broadcasting a DHCPDISCOVER message. Since its lease has expired, it will accept any IP address offered to it. Once it has a new IP address (presumably from a different DHCP server) it will once again be able to use the network. However, since its IP address has changed, any ongoing connections will be broken.</paragraph><heading level='2'>Security</heading><paragraph><template><target>see also</target><arg>DHCP snooping</arg></template>The base DHCP protocol does not include any mechanism for authentication.<extension extension_name='ref' name="RAIOSec"><template><target>cite web</target><arg name="url">http://tools.ietf.org/html/rfc3046#section-7</arg><arg name="title">RFC 3046 - DHCP Relay Agent Information Option</arg><arg name="author">Michael Patrick</arg><arg name="date">January 2001</arg><arg name="work">Network Working Group<space/></arg></template></extension><space/>Because of this, it is vulnerable to a variety of attacks. These attacks fall into three main categories:</paragraph><list type='bullet'><listitem>Unauthorized DHCP servers providing false information to clients.<extension extension_name='ref' name="DHCPv4Sec"><template><target>cite web</target><arg name="url">http://tools.ietf.org/html/rfc2131#section-7</arg><arg name="title">RFC 2131 - Dynamic Host Configuration Protocol<space/></arg><arg name="author">Ralph Droms</arg><arg name="date">March 1997</arg><arg name="work">Network Working Group<space/></arg></template></extension></listitem><listitem>Unauthorized clients gaining access to resources.<extension extension_name='ref' name="DHCPv4Sec"></extension></listitem><listitem>Resource exhaustion attacks from malicious DHCP clients.<extension extension_name='ref' name="DHCPv4Sec"></extension></listitem></list><paragraph>Because the client has no way to validate the identity of a DHCP server,<space/><link><target>Rogue DHCP</target><part>unauthorized DHCP servers</part></link><space/>(commonly called &quot;rogue DHCP&quot;) can be operated on networks, providing incorrect information to DHCP clients.<extension extension_name='ref' name="Stapko2011"></extension><space/>This can serve either as a denial-of-service attack, preventing the client from gaining access to network connectivity,<extension extension_name='ref' name="Rountree2013"><template><target>cite book</target><arg name="author">Derrick Rountree</arg><arg name="title">Windows 2012 Server Network Security: Securing Your Windows Network Systems and Infrastructure</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2013</arg><arg name="publisher">Newnes</arg><arg name="isbn">978-1-59749-965-1</arg><arg name="page">22</arg></template></extension><space/>or as a<space/><link><target>man-in-the-middle attack</target></link>.<extension extension_name='ref' name="Rooney2011"><template><target>cite book</target><arg name="author">Timothy Rooney</arg><arg name="title">Introduction to IP Address Management</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2010</arg><arg name="publisher">John Wiley & Sons</arg><arg name="isbn">978-1-118-07380-3</arg><arg name="page">180</arg></template></extension><space/>Because the DHCP server provides the DHCP client with server IP addresses, such as the IP address of one or more DNS servers,<extension extension_name='ref' name="DHCPv4Sec"></extension><space/>an attacker can convince a DHCP client to do its DNS lookups through its own DNS server, and can therefore provide its own answers to DNS queries from the client.<extension extension_name='ref' name="DNSRedirect"><template><target>cite web</target><arg name="url">http://www.securelist.com/en/blog/208188095/TDSS_loader_now_got_legs</arg><arg name="title">TDSS loader now got "legs"</arg><arg name="author">Sergey Golovanov (Kaspersky Labs)</arg><arg name="date">June 2011</arg></template></extension><space/>This in turn allows the attacker to redirect network traffic through itself, allowing it to eavesdrop on connections between the client and network servers it contacts, or to simply replace those network servers with its own.<extension extension_name='ref' name="DNSRedirect"></extension></paragraph><paragraph>Because the DHCP server has no secure mechanism for authenticating the client, clients can gain unauthorized access to IP addresses by presenting credentials, such as client identifiers, that belong to other DHCP clients.<extension extension_name='ref' name="Stapko2011"></extension><space/>This also allows DHCP clients to exhaust the DHCP server's store of IP addressesby presenting new credentials each time it asks for an address, the client can consume all the available IP addresses on a particular network link, preventing other DHCP clients from getting service.<extension extension_name='ref' name="Stapko2011"><template><target>cite book</target><arg name="author">Timothy Stapko</arg><arg name="title">Practical Embedded Security: Building Secure Resource-Constrained Systems</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2011</arg><arg name="publisher">Newnes</arg><arg name="isbn">978-0-08-055131-9</arg><arg name="page">39</arg></template></extension></paragraph><paragraph>DHCP does provide some mechanisms for mitigating these problems. The Relay Agent Information Option protocol extension (RFC 3046, usually referred to in the industry by its actual number as Option 82<extension extension_name='ref' name="HensCaballero2008"><template><target>cite book</target><arg name="author1">Francisco J. Hens</arg><arg name="author2">Jos M. Caballero</arg><arg name="title">Triple Play: Building the converged network for IP, VoIP and IPTV</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2008</arg><arg name="publisher">John Wiley & Sons</arg><arg name="isbn">978-0-470-75439-9</arg><arg name="page">239</arg></template></extension><extension extension_name='ref' name="Ramirez2008"><template><target>cite book</target><arg name="author">David H. Ramirez</arg><arg name="title">IPTV Security: Protecting High-Value Digital Contents</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2008</arg><arg name="publisher">John Wiley & Sons</arg><arg name="isbn">978-0-470-72719-5</arg><arg name="page">55</arg></template></extension>) allows network operators to attach tags to DHCP messages as these messages arrive on the network operator's trusted network. This tag is then used as an authorization token to control the client's access to network resources. Because the client has no access to the network upstream of the relay agent, the lack of authentication does not prevent the DHCP server operator from relying on the authorization token.<extension extension_name='ref' name="RAIOSec"></extension></paragraph><paragraph>Another extension, Authentication for DHCP Messages (RFC 3118), provides a mechanism for authenticating DHCP messages. Unfortunately RFC 3118 has not seen (as of 2002) widespread adoption because of the problems of managing keys for large numbers of DHCP clients.<extension extension_name='ref'><template><target>cite web</target><arg name="url">http://www.ietf.org/mail-archive/web/dhcwg/current/msg00876.html</arg><arg name="title">Implementation of RFC 3118</arg><arg name="author">Ted Lemon</arg><arg name="date">April 2002</arg></template></extension><space/>A 2007 book about DSL technologies remarked that &quot;there were numerous security vulnerabilities identified against the security measures proposed by RFC 3118. This fact, combined with the introduction of<space/><link><target>802.1x</target></link>, slowed the deployment and take-rate of authenticated DHCP, and it has never been widely deployed.&quot;<extension extension_name='ref' name="GoldenDedieu2007"><template><target>cite book</target><arg name="author1">Philip Golden</arg><arg name="author2">Herv Dedieu</arg><arg name="author3">Krista S. Jacobsen</arg><arg name="title">Implementation and Applications of DSL Technology</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2007</arg><arg name="publisher">Taylor & Francis</arg><arg name="isbn">978-1-4200-1307-8</arg><arg name="page">484</arg></template></extension><space/>A 2010 book notes that &quot;[t]here have been very few implementations of DHCP Authentication. The challenges of key management and processing delays due to hash computation have been deemed too heavy a price to pay for the perceived benefits.&quot;<extension extension_name='ref' name="Rooney2011b"><template><target>cite book</target><arg name="author">Timothy Rooney</arg><arg name="title">Introduction to IP Address Management</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2010</arg><arg name="publisher">John Wiley & Sons</arg><arg name="isbn">978-1-118-07380-3</arg><arg name="pages">181182</arg></template></extension></paragraph><paragraph>More recent (2008) architectural proposals involve authenticating DHCP requests using 802.1x or<space/><link><target>Protocol for Carrying Authentication for Network Access</target><part>PANA</part></link><space/>(both of which transport<space/><link><target>Extensible Authentication Protocol</target><part>EAP</part></link>).<extension extension_name='ref' name="Copeland2008"><template><target>cite book</target><arg name="author">Rebecca Copeland</arg><arg name="title">Converging NGN Wireline and Mobile 3G Networks with IMS</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2008</arg><arg name="publisher">Taylor & Francis</arg><arg name="isbn">978-1-4200-1378-8</arg><arg name="pages">142143</arg></template></extension><space/>An IETF proposal was made for including EAP in DHCP itself, the so-called EAPoDHCP;<extension extension_name='ref' name="PrasadMihovska2009"><template><target>cite book</target><arg name="author1">Ramjee Prasad</arg><arg name="author2">Albena Mihovska</arg><arg name="title">New Horizons in Mobile and Wireless Communications: Networks, services, and applications</arg><arg name="url">http://books.google.com/books?id</arg><arg name="year">2009</arg><arg name="publisher">Artech House</arg><arg name="isbn">978-1-60783-970-5</arg><arg name="page">339</arg><arg name="volume">2</arg></template></extension><space/>this does not appear to have progressed beyond IETF draft level, the last of which dates to 2010.<extension extension_name='ref'>http://tools.ietf.org/search/draft-pruss-dhcp-auth-dsl-07</extension></paragraph><heading level='2'>IETF standards documents</heading><list type='bullet'><listitem>RFC 2131, Dynamic Host Configuration Protocol</listitem><listitem>RFC 2132, DHCP Options and BOOTP Vendor Extensions</listitem><listitem>RFC 3046, DHCP Relay Agent Information Option</listitem><listitem>RFC 3942, Reclassifying Dynamic Host Configuration Protocol Version Four (DHCPv4) Options</listitem><listitem>RFC 4242, Information Refresh Time Option for Dynamic Host Configuration Protocol for IPv6</listitem><listitem>RFC 4361, Node-specific Client Identifiers for Dynamic Host Configuration Protocol Version Four (DHCPv4)</listitem><listitem>RFC 4436, Detecting Network Attachment in IPv4 (DNAv4)</listitem></list><heading level='2'>See also</heading><paragraph><template><target>Portal</target><arg>Computer networking</arg></template><template><target>Div col</target><arg></arg><arg>25em</arg></template></paragraph><list type='bullet'><listitem><link><target>Boot Service Discovery Protocol</target><part>Boot Service Discovery Protocol (BSDP)</part></link><template><target>snd</target></template><space/>a DHCP extension used by Apple's<space/><link><target>NetBoot</target></link></listitem><listitem><link><target>Comparison of DHCP server software</target></link></listitem><listitem><link><target>Peg DHCP</target></link><space/>(RFC 2322)</listitem><listitem><link><target>Preboot Execution Environment</target></link><space/>(PXE)</listitem><listitem><link><target>Reverse Address Resolution Protocol</target></link><space/>(RARP)</listitem><listitem><link><target>Rogue DHCP</target></link></listitem><listitem><link><target>UDP Helper Address</target></link><template><target>snd</target></template><space/>a tool for routing DHCP requests across subnet boundaries</listitem><listitem><link><target>Zeroconf</target></link><template><target>snd</target></template><space/>Zero Configuration Networking</listitem></list><paragraph><template><target>Div col end</target></template></paragraph><heading level='2'>Notes</heading><paragraph><template><target>Notelist</target><arg>30em</arg></template></paragraph><heading level='2'>References</heading><paragraph><template><target>Reflist</target><arg>30em</arg></template></paragraph><heading level='2'>External links</heading><paragraph><template><target>commons category</target><arg>Dynamic Host Configuration Protocol (DHCP)</arg></template><template><target>Prone to spam</target><arg name="date">May 2012</arg></template><template><target>Z148</target></template></paragraph><paragraph><template><target>Authority control</target></template><link><target>Category:Internet Standards</target></link><link><target>Category:Application layer protocols</target></link><link><target>Category:Network service</target></link></paragraph></article>